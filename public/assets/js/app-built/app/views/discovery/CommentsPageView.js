define(["backbone","models/DiscoveryModel","views/discovery/CommentListView","text!templates/discovery/comments_page_view.html"],function(e,t,n,r){$(r).appendTo("body");var i=e.View.extend({el:"#discovery_comments_page",initialize:function(){this.discovery_model=new t,this.comment_list_view=new n({el:this.$el.find(".comments-container")[0],collection:this.discovery_model.comments}),this.listenTo(this.discovery_model,"change:title",this.renderTitle),this.listenTo(this.discovery_model.comments,"change:total",this.renderTotal)},setDiscoveryId:function(e){this.discovery_model.set("id",e),this.discovery_model.fetch()},renderTitle:function(e){this.$el.find(".title").text(e.get("title"))},renderTotal:function(e){this.$el.find(".comments-num").text(e.total)}});return i});