define(["jquery","underscore","backbone","text!templates/discovery/listItem.html"],function(e,t,n,r){var i=n.View.extend({initialize:function(){this.item_list_tpl=t.template(r),this.$pager=e('<div class="pager ui-btn ui-btn-a" style="display:none"><span>加载更多</span></div>'),this.$el.append(this.$pager),this.$list=this.$el.find(".discovery-list"),this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"reset",this.resetItems),this.listenTo(this.collection,"reset",this.setPager),this.listenTo(this.collection,"page_end",this.setPager),this.listenTo(this.collection,"change:type",this.setIndicator)},render:function(e){},addItem:function(e){this.$list.append(this.item_list_tpl(e.toJSON()))},setPager:function(e,t){console.log("page_end"),e.models.length<e.total?this.$pager.show():this.$pager.hide()},resetItems:function(e,t){this.$list.empty();var n=e.models,r=n.length;for(var i=0;i<r;i++)this.$list.append(this.item_list_tpl(n[i].toJSON()))},setIndicator:function(e){},loadMore:function(){this.collection.nextPage()},events:{"click .pager":"loadMore"}});return i});