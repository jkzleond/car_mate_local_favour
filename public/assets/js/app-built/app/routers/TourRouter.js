define(["jquery","backbone","views/driving_tour/ToursPageView","views/driving_tour/TourDetailPageView","jqm","base64"],function(e,t,n,r){var i=t.Router.extend({initialize:function(){this.tours_page_view=new n,this.tour_detail_page_view=new r,this.listenTo(this.tour_detail_page_view,"invalid:sign",this._onSignInValid),this.listenTo(this.tour_detail_page_view,"ordergen",this._onNewOrderGen)},_onSignInValid:function(t,n){e.cm.toast({msg:n})},_onNewOrderGen:function(e,t){if(!t)return;var n="<root><orderId>"+t.order_id+"<orderId><orderNo>"+t.order_no+"</orderNo><orderFee>"+t.order_fee+"</orderFee><payType><offline>"+t.pay_type.offline+"</offline><alipay>"+t.pay_type.alipay+"</alipay><wxpay>"+t.pay_type.wxpay+"</wxpay></payType></root>"},routes:{"tours(/:type)":"index","tour/detail(/:id)":"tourDetail"},index:function(t){t||this.tours_page_view.tour_list_view.collection.reset(),this.tours_page_view.tour_list_view.collection.fetch(),e(":mobile-pagecontainer").pagecontainer("change","#tours_page")},tourDetail:function(t){this.tour_detail_page_view.model.clear(),this.tour_detail_page_view.model.set({id:t},{silent:!0}),this.tour_detail_page_view.model.fetch(),e(":mobile-pagecontainer").pagecontainer("change","#tour_detail_page")}});return i});