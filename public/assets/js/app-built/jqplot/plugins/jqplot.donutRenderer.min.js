/* jqPlot 1.0.8r1250 | (c) 2009-2013 Chris Leonello | jplot.com
   jsDate | (c) 2010-2013 Chris Leonello
 */

(function(e){function t(t,n,r){r=r||{},r.axesDefaults=r.axesDefaults||{},r.legend=r.legend||{},r.seriesDefaults=r.seriesDefaults||{};var i=!1;if(r.seriesDefaults.renderer==e.jqplot.DonutRenderer)i=!0;else if(r.series)for(var s=0;s<r.series.length;s++)r.series[s].renderer==e.jqplot.DonutRenderer&&(i=!0);i&&(r.axesDefaults.renderer=e.jqplot.DonutAxisRenderer,r.legend.renderer=e.jqplot.DonutLegendRenderer,r.legend.preDraw=!0,r.seriesDefaults.pointLabels={show:!1})}function n(t,n,r){for(var i=1;i<this.series.length;i++)if(!this.series[i]._previousSeries.length)for(var s=0;s<i;s++)this.series[i].renderer.constructor==e.jqplot.DonutRenderer&&this.series[s].renderer.constructor==e.jqplot.DonutRenderer&&this.series[i]._previousSeries.push(this.series[s]);for(i=0;i<this.series.length;i++)this.series[i].renderer.constructor==e.jqplot.DonutRenderer&&(this.series[i]._numberSeries=this.series.length,this.series[i].highlightMouseOver&&(this.series[i].highlightMouseDown=!1))}function i(t){for(var n=0;n<this.series.length;n++)this.series[n].seriesColors=this.seriesColors,this.series[n].colorGenerator=e.jqplot.colorGenerator}function s(e,t,n){var r=e.series[t],i=e.plugins.donutRenderer.highlightCanvas;i._ctx.clearRect(0,0,i._ctx.canvas.width,i._ctx.canvas.height),r._highlightedPoint=n,e.plugins.donutRenderer.highlightedSeriesIndex=t,r.renderer.drawSlice.call(r,i._ctx,r._sliceAngles[n][0],r._sliceAngles[n][1],r.highlightColors[n],!1)}function o(e){var t=e.plugins.donutRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var n=0;n<e.series.length;n++)e.series[n]._highlightedPoint=null;e.plugins.donutRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight")}function u(e,t,n,r,i){if(r){var u=[r.seriesIndex,r.pointIndex,r.data],a=jQuery.Event("jqplotDataMouseOver");a.pageX=e.pageX,a.pageY=e.pageY,i.target.trigger(a,u);if(i.series[u[0]].highlightMouseOver&&(u[0]!=i.plugins.donutRenderer.highlightedSeriesIndex||u[1]!=i.series[u[0]]._highlightedPoint)){var f=jQuery.Event("jqplotDataHighlight");f.which=e.which,f.pageX=e.pageX,f.pageY=e.pageY,i.target.trigger(f,u),s(i,u[0],u[1])}}else r==null&&o(i)}function a(e,t,n,r,i){if(r){var u=[r.seriesIndex,r.pointIndex,r.data];if(i.series[u[0]].highlightMouseDown&&(u[0]!=i.plugins.donutRenderer.highlightedSeriesIndex||u[1]!=i.series[u[0]]._highlightedPoint)){var a=jQuery.Event("jqplotDataHighlight");a.which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,i.target.trigger(a,u),s(i,u[0],u[1])}}else r==null&&o(i)}function f(e,t,n,r,i){var s=i.plugins.donutRenderer.highlightedSeriesIndex;s!=null&&i.series[s].highlightMouseDown&&o(i)}function l(e,t,n,r,i){if(r){var s=[r.seriesIndex,r.pointIndex,r.data],o=jQuery.Event("jqplotDataClick");o.which=e.which,o.pageX=e.pageX,o.pageY=e.pageY,i.target.trigger(o,s)}}function c(e,t,n,r,i){if(r){var s=[r.seriesIndex,r.pointIndex,r.data],u=i.plugins.donutRenderer.highlightedSeriesIndex;u!=null&&i.series[u].highlightMouseDown&&o(i);var a=jQuery.Event("jqplotDataRightClick");a.which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,i.target.trigger(a,s)}}function h(){this.plugins.donutRenderer&&this.plugins.donutRenderer.highlightCanvas&&(this.plugins.donutRenderer.highlightCanvas.resetCanvas(),this.plugins.donutRenderer.highlightCanvas=null),this.plugins.donutRenderer={highlightedSeriesIndex:null},this.plugins.donutRenderer.highlightCanvas=new e.jqplot.GenericCanvas;var t=e(this.targetId+" .jqplot-data-label");t.length?e(t[0]).before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this));var n=this.plugins.donutRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(e){o(e.data.plot)})}e.jqplot.DonutRenderer=function(){e.jqplot.LineRenderer.call(this)},e.jqplot.DonutRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.DonutRenderer.prototype.constructor=e.jqplot.DonutRenderer,e.jqplot.DonutRenderer.prototype.init=function(t,r){this.diameter=null,this.innerDiameter=null,this.thickness=null,this.padding=20,this.sliceMargin=0,this.ringMargin=null,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.4,this.dataLabelNudge=0,this.startAngle=0,this.tickRenderer=e.jqplot.DonutTickRenderer,this._drawData=!0,this._type="donut",t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1),e.extend(!0,this,t),this.diameter!=null&&(this.diameter=this.diameter-this.sliceMargin),this._diameter=null,this._innerDiameter=null,this._radius=null,this._innerRadius=null,this._thickness=null,this._previousSeries=[],this._numberSeries=1,this._sliceAngles=[],this._highlightedPoint=null;if(this.highlightColors.length==0)for(var s=0;s<this.seriesColors.length;s++){var o=e.jqplot.getColorComponents(this.seriesColors[s]),p=[o[0],o[1],o[2]],d=p[0]+p[1]+p[2];for(var v=0;v<3;v++)p[v]=d>570?p[v]*.8:p[v]+.3*(255-p[v]),p[v]=parseInt(p[v],10);this.highlightColors.push("rgb("+p[0]+","+p[1]+","+p[2]+")")}r.postParseOptionsHooks.addOnce(i),r.postInitHooks.addOnce(n),r.eventListenerHooks.addOnce("jqplotMouseMove",u),r.eventListenerHooks.addOnce("jqplotMouseDown",a),r.eventListenerHooks.addOnce("jqplotMouseUp",f),r.eventListenerHooks.addOnce("jqplotClick",l),r.eventListenerHooks.addOnce("jqplotRightClick",c),r.postDrawHooks.addOnce(h)},e.jqplot.DonutRenderer.prototype.setGridData=function(e){var t=[],n=[],r=this.startAngle/180*Math.PI,i=0;this._drawData=!1;for(var s=0;s<this.data.length;s++)this.data[s][1]!=0&&(this._drawData=!0),t.push(this.data[s][1]),n.push([this.data[s][0]]),s>0&&(t[s]+=t[s-1]),i+=this.data[s][1];var o=Math.PI*2/t[t.length-1];for(var s=0;s<t.length;s++)n[s][1]=t[s]*o,n[s][2]=this.data[s][1]/i;this.gridData=n},e.jqplot.DonutRenderer.prototype.makeGridData=function(e,t){var n=[],r=[],i=0,s=this.startAngle/180*Math.PI;this._drawData=!1;for(var o=0;o<e.length;o++)this.data[o][1]!=0&&(this._drawData=!0),n.push(e[o][1]),r.push([e[o][0]]),o>0&&(n[o]+=n[o-1]),i+=e[o][1];var u=Math.PI*2/n[n.length-1];for(var o=0;o<n.length;o++)r[o][1]=n[o]*u,r[o][2]=e[o][1]/i;return r},e.jqplot.DonutRenderer.prototype.drawSlice=function(e,t,n,r,i){function f(){n>6.282+this.startAngle&&(n=6.282+this.startAngle,t>n&&(t=6.281+this.startAngle));if(t>=n)return;e.beginPath(),e.fillStyle=r,e.strokeStyle=r,e.arc(0,0,s,t,n,!1),e.lineTo(o*Math.cos(n),o*Math.sin(n)),e.arc(0,0,o,n,t,!0),e.closePath(),u?e.fill():e.stroke()}var s=this._diameter/2,o=s-this._thickness,u=this.fill;e.save(),e.translate(this._center[0],this._center[1]);if(i)for(var a=0;a<this.shadowDepth;a++)e.save(),e.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),f();else f();if(i)for(var a=0;a<this.shadowDepth;a++)e.restore();e.restore()},e.jqplot.DonutRenderer.prototype.draw=function(t,n,r,i){var s,o=r!=undefined?r:{},u=0,a=0,f=1;if(r.legendInfo&&r.legendInfo.placement=="insideGrid"){var l=r.legendInfo;switch(l.location){case"nw":u=l.width+l.xoffset;break;case"w":u=l.width+l.xoffset;break;case"sw":u=l.width+l.xoffset;break;case"ne":u=l.width+l.xoffset,f=-1;break;case"e":u=l.width+l.xoffset,f=-1;break;case"se":u=l.width+l.xoffset,f=-1;break;case"n":a=l.height+l.yoffset;break;case"s":a=l.height+l.yoffset,f=-1;break;default:}}var c=o.shadow!=undefined?o.shadow:this.shadow,h=o.showLine!=undefined?o.showLine:this.showLine,p=o.fill!=undefined?o.fill:this.fill,d=t.canvas.width,v=t.canvas.height,m=d-u-2*this.padding,g=v-a-2*this.padding,y=Math.min(m,g),b=y,w=this.ringMargin==null?this.sliceMargin*2:this.ringMargin;for(var s=0;s<this._previousSeries.length;s++)b-=2*this._previousSeries[s]._thickness+2*w;this._diameter=this.diameter||b;if(this.innerDiameter!=null){var E=this._numberSeries>1&&this.index>0?this._previousSeries[0]._diameter:this._diameter;this._thickness=this.thickness||(E-this.innerDiameter-2*w*this._numberSeries)/this._numberSeries/2}else this._thickness=this.thickness||y/2/(this._numberSeries+1)*.85;var S=this._radius=this._diameter/2;this._innerRadius=this._radius-this._thickness;var x=this.startAngle/180*Math.PI;this._center=[(d-f*u)/2+f*u,(v-f*a)/2+f*a];if(this.shadow){var T="rgba(0,0,0,"+this.shadowAlpha+")";for(var s=0;s<n.length;s++){var N=s==0?x:n[s-1][1]+x;N+=this.sliceMargin/180*Math.PI,this.renderer.drawSlice.call(this,t,N,n[s][1]+x,T,!0)}}for(var s=0;s<n.length;s++){var N=s==0?x:n[s-1][1]+x;N+=this.sliceMargin/180*Math.PI;var C=n[s][1]+x;this._sliceAngles.push([N,C]),this.renderer.drawSlice.call(this,t,N,C,this.seriesColors[s],!1);if(this.showDataLabels&&n[s][2]*100>=this.dataLabelThreshold){var k,L=(N+C)/2,A;this.dataLabels=="label"?(k=this.dataLabelFormatString||"%s",A=e.jqplot.sprintf(k,n[s][0])):this.dataLabels=="value"?(k=this.dataLabelFormatString||"%d",A=e.jqplot.sprintf(k,this.data[s][1])):this.dataLabels=="percent"?(k=this.dataLabelFormatString||"%d%%",A=e.jqplot.sprintf(k,n[s][2]*100)):this.dataLabels.constructor==Array&&(k=this.dataLabelFormatString||"%s",A=e.jqplot.sprintf(k,this.dataLabels[s]));var O=this._innerRadius+this._thickness*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,M=this._center[0]+Math.cos(L)*O+this.canvas._offsets.left,_=this._center[1]+Math.sin(L)*O+this.canvas._offsets.top,D=e('<span class="jqplot-donut-series jqplot-data-label" style="position:absolute;">'+A+"</span>").insertBefore(i.eventCanvas._elem);M-=D.width()/2,_-=D.height()/2,M=Math.round(M),_=Math.round(_),D.css({left:M,top:_})}}},e.jqplot.DonutAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)},e.jqplot.DonutAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.DonutAxisRenderer.prototype.constructor=e.jqplot.DonutAxisRenderer,e.jqplot.DonutAxisRenderer.prototype.init=function(t){this.tickRenderer=e.jqplot.DonutTickRenderer,e.extend(!0,this,t),this._dataBounds={min:0,max:100},this.min=0,this.max=100,this.showTicks=!1,this.ticks=[],this.showMark=!1,this.show=!1},e.jqplot.DonutLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.DonutLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.DonutLegendRenderer.prototype.constructor=e.jqplot.DonutLegendRenderer,e.jqplot.DonutLegendRenderer.prototype.init=function(t){this.numberRows=null,this.numberColumns=null,e.extend(!0,this,t)},e.jqplot.DonutLegendRenderer.prototype.draw=function(){var t=this;if(this.show){var n=this._series,r="position:absolute;";r+=this.background?"background:"+this.background+";":"",r+=this.border?"border:"+this.border+";":"",r+=this.fontSize?"font-size:"+this.fontSize+";":"",r+=this.fontFamily?"font-family:"+this.fontFamily+";":"",r+=this.textColor?"color:"+this.textColor+";":"",r+=this.marginTop!=null?"margin-top:"+this.marginTop+";":"",r+=this.marginBottom!=null?"margin-bottom:"+this.marginBottom+";":"",r+=this.marginLeft!=null?"margin-left:"+this.marginLeft+";":"",r+=this.marginRight!=null?"margin-right:"+this.marginRight+";":"",this._elem=e('<table class="jqplot-table-legend" style="'+r+'"></table>');var i=!1,s=!1,o,u,a=n[0],f=new e.jqplot.ColorGenerator(a.seriesColors);if(a.show){var l=a.data;this.numberRows?(o=this.numberRows,this.numberColumns?u=this.numberColumns:u=Math.ceil(l.length/o)):this.numberColumns?(u=this.numberColumns,o=Math.ceil(l.length/this.numberColumns)):(o=l.length,u=1);var c,h,p,d,v,m,g,y,b=0;for(c=0;c<o;c++){s?p=e('<tr class="jqplot-table-legend"></tr>').prependTo(this._elem):p=e('<tr class="jqplot-table-legend"></tr>').appendTo(this._elem);for(h=0;h<u;h++)b<l.length&&(m=this.labels[b]||l[b][0].toString(),y=f.next(),s?c==o-1?i=!1:i=!0:c>0?i=!0:i=!1,g=i?this.rowSpacing:"0",d=e('<td class="jqplot-table-legend" style="text-align:center;padding-top:'+g+';"><div><div class="jqplot-table-legend-swatch" style="border-color:'+y+';"></div></div></td>'),v=e('<td class="jqplot-table-legend" style="padding-top:'+g+';"></td>'),this.escapeHtml?v.text(m):v.html(m),s?(v.prependTo(p),d.prependTo(p)):(d.appendTo(p),v.appendTo(p)),i=!0),b++}}}return this._elem};var r=!1;e.jqplot.preInitHooks.push(t),e.jqplot.DonutTickRenderer=function(){e.jqplot.AxisTickRenderer.call(this)},e.jqplot.DonutTickRenderer.prototype=new e.jqplot.AxisTickRenderer,e.jqplot.DonutTickRenderer.prototype.constructor=e.jqplot.DonutTickRenderer})(jQuery);