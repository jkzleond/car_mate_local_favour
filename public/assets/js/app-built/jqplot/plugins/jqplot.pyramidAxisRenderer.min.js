/* jqPlot 1.0.8r1250 | (c) 2009-2013 Chris Leonello | jplot.com
   jsDate | (c) 2010-2013 Chris Leonello
 */

(function(e){e.jqplot.PyramidAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)},e.jqplot.PyramidAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.PyramidAxisRenderer.prototype.constructor=e.jqplot.PyramidAxisRenderer,e.jqplot.PyramidAxisRenderer.prototype.init=function(t){this.position=null,this.drawBaseline=!0,this.baselineWidth=null,this.baselineColor=null,this.tickSpacingFactor=25,this._type="pyramid",this._splitAxis=!1,this._splitLength=null,this.category=!1,this._autoFormatString="",this._overrideFormatString=!1,e.extend(!0,this,t),this.renderer.options=t,this.resetDataBounds=this.renderer.resetDataBounds,this.resetDataBounds()},e.jqplot.PyramidAxisRenderer.prototype.resetDataBounds=function(){var e=this._dataBounds;e.min=null,e.max=null;var t;for(var n=0;n<this._series.length;n++){var r=this._series[n],i=r._plotData;for(var s=0,o=i.length;s<o;s++)if(this.name.charAt(0)==="x"){t=i[s][1];if(t!==null&&t<e.min||e.min===null)e.min=t;if(t!==null&&t>e.max||e.max===null)e.max=t}else{t=i[s][0];if(t!==null&&t<e.min||e.min===null)e.min=t;if(t!==null&&t>e.max||e.max===null)e.max=t}}},e.jqplot.PyramidAxisRenderer.prototype.draw=function(t,n){if(this.show){this.renderer.createTicks.call(this,n);var r=0,i;this._elem&&(this._elem.emptyForce(),this._elem=null),this._elem=e(document.createElement("div")),this._elem.addClass("jqplot-axis jqplot-"+this.name),this._elem.css("position","absolute"),this.name=="xaxis"||this.name=="x2axis"?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions);if(this._label.show){var s=this._label.draw(t,n);s.appendTo(this._elem),s=null}var o=this._ticks,u;for(var a=0;a<o.length;a++)u=o[a],u.show&&u.showLabel&&!u.isMinorTick&&this._elem.append(u.draw(t,n));u=null,o=null}return this._elem};var t=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],n={};for(var r=0,i=t.length;r<i;r++)n[t[r]]=t[r];e.jqplot.PyramidAxisRenderer.prototype.createTicks=function(t){var r=this.ticks,i=this._dataBounds,s,o,u,a,f,l,c,h,p,v,m,g=this.min,y=this.max,b,w,E,S,x,T,N,C,k,L,A=null,O;if(r.length){for(p=0,v=r.length;p<v;p++)b=r[p],w=new this.tickRenderer(this.tickOptions),e.isArray(b)?(w.value=b[0],w.label=b[1],w.setTick(b[0],this.name),this._ticks.push(w)):e.isPlainObject(b)?(e.extend(!0,w,b),w.axis=this.name,this._ticks.push(w)):(typeof b=="string"?L=p+t.defaultAxisStart:L=b,w.value=L,w.label=b,w.axis=this.name,this._ticks.push(w));this.numberTicks=r.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value,this.tickInterval=(this.max-this.min)/(this.numberTicks-1);if(this._options.tickInterval){var M=this._options.tickInterval;for(p=0;p<this.numberTicks;p++)p%M!==0&&(this._ticks[p].isMinorTick=!0)}else{s=this.name.charAt(0)==="x"?this._plotDimensions.width:this._plotDimensions.height,k=Math.round(2+s/this.tickSpacingFactor);if(this.numberTicks>k){O=this.numberTicks-1;for(p=2;p<O;p++)if(O%p===0&&O/p<k){A=p-1;break}if(A!==null){var _=1;for(p=1,v=this._ticks.length;p<v;p++)_<=A?(this._ticks[p].show=!1,_+=1):_=1}}}O=[];if(this.category){this._ticks[0].showGridline=!1,this._ticks[0].showMark=!1;for(p=this._ticks.length-1;p>0;p--)w=new this.tickRenderer(this.tickOptions),w.value=this._ticks[p-1].value+this.tickInterval/2,w.label="",w.showLabel=!1,w.axis=this.name,this._ticks[p].showGridline=!1,this._ticks[p].showMark=!1,this._ticks.splice(p,0,w);w=new this.tickRenderer(this.tickOptions),w.value=this._ticks[0].value-this.tickInterval/2,w.label="",w.showLabel=!1,w.axis=this.name,this._ticks.unshift(w),w=new this.tickRenderer(this.tickOptions),w.value=this._ticks[this._ticks.length-1].value+this.tickInterval/2,w.label="",w.showLabel=!1,w.axis=this.name,this._ticks.push(w),this.tickInterval=this.tickInterval/2,this.numberTicks=this._ticks.length,this.min=this._ticks[0].value,this.max=this._ticks[this._ticks.length-1].value}}else{if(this.name.charAt(0)==="x"){s=this._plotDimensions.width;var D=Math.max(i.max,Math.abs(i.min)),P=Math.min(i.min,-D);u=P,a=D,f=a-u;if(this.tickOptions==null||!this.tickOptions.formatString)this._overrideFormatString=!0;E=30,S=Math.max(s,E+1),x=(S-E)/300,T=e.jqplot.LinearTickGenerator(u,a,x),N=u+f*(this.padMin-1),C=a-f*(this.padMax-1);if(u<N||a>C)N=u-f*(this.padMin-1),C=a+f*(this.padMax-1),T=e.jqplot.LinearTickGenerator(N,C,x);this.min=T[0],this.max=T[1],this.numberTicks=T[2],this._autoFormatString=T[3],this.tickInterval=T[4]}else{s=this._plotDimensions.height,u=i.min,a=i.max,m=this._series[0],this._ticks=[],f=a-u,n[f]&&(f+=1,a+=1),this.max=a,this.min=u,k=Math.round(2+s/this.tickSpacingFactor);if(f+1<=k)this.numberTicks=f+1,this.tickInterval=1;else for(var p=k;p>1;p--)if(f/(p-1)===Math.round(f/(p-1))){this.numberTicks=p,this.tickInterval=f/(p-1);break}}this._overrideFormatString&&this._autoFormatString!=""&&(this.tickOptions=this.tickOptions||{},this.tickOptions.formatString=this._autoFormatString);var H;for(p=0;p<this.numberTicks;p++)this.tickOptions.axis=this.name,H=this.min+this.tickInterval*p,this.name.charAt(0)==="x"&&(H=Math.abs(H)),this.tickOptions.value=this.min+this.tickInterval*p,w=new this.tickRenderer(this.tickOptions),w.label=w.prefix+w.formatter(w.formatString,H),this._ticks.push(w),this.name.charAt(0)==="x"&&t.axes.yMidAxis.show&&this.tickOptions.value===0&&(this._splitAxis=!0,this._splitLength=t.axes.yMidAxis.getWidth(),w=new this.tickRenderer(this.tickOptions),this._ticks.push(w),w.value=this.max/2e3);w=null}},e.jqplot.PyramidAxisRenderer.prototype.set=function(){var t=0,n,r=0,s=0,o,u,f,l=this._label==null?!1:this._label.show;if(this.show){u=this._ticks,i=u.length;for(o=0;o<i;o++)f=u[o],!f._breakTick&&f.show&&f.showLabel&&!f.isMinorTick&&(this.name.charAt(0)==="x"?n=f._elem.outerHeight(!0):n=f._elem.outerWidth(!0),n>t&&(t=n));if(this.name==="yMidAxis")for(o=0;o<i;o++)f=u[o],f._elem&&(n=(t-f._elem.outerWidth(!0))/2,f._elem.css("left",n));f=null,u=null,l&&(r=this._label._elem.outerWidth(!0),s=this._label._elem.outerHeight(!0));if(this.name==="xaxis")t+=s,this._elem.css({height:t+"px",left:"0px",bottom:"0px"});else if(this.name==="x2axis")t+=s,this._elem.css({height:t+"px",left:"0px",top:"0px"});else if(this.name==="yaxis")t+=r,this._elem.css({width:t+"px",left:"0px",top:"0px"}),l&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",r+"px");else if(this.name==="yMidAxis"){var n=t/2-r/2;this._elem.css({width:t+"px",top:"0px"}),l&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css({width:r,left:n,top:0})}else t+=r,this._elem.css({width:t+"px",right:"0px",top:"0px"}),l&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",r+"px")}},e.jqplot.PyramidAxisRenderer.prototype.pack=function(t,n){t=t||{},n=n||this._offsets;var r=this._ticks,i=this.max,s=this.min,o=n.max,u=n.min,a=this._label==null?!1:this._label.show;for(var f in t)this._elem.css(f,t[f]);this._offsets=n;var l=o-u,c=i-s,h=this._splitLength;this._splitAxis?(l-=this._splitLength,this.p2u=function(e){return(e-u)*c/l+s},this.u2p=function(e){return e<=0?(e-s)*l/c+u:(e-s)*l/c+u+h},this.series_u2p=function(e){return e<=0?(e-s)*l/c:(e-s)*l/c+h},this.series_p2u=function(e){return e*c/l+s}):(this.p2u=function(e){return(e-u)*c/l+s},this.u2p=function(e){return(e-s)*l/c+u},this.name.charAt(0)==="x"?(this.series_u2p=function(e){return(e-s)*l/c},this.series_p2u=function(e){return e*c/l+s}):(this.series_u2p=function(e){return(e-i)*l/c},this.series_p2u=function(e){return e*c/l+i}));if(this.show)if(this.name.charAt(0)==="x"){for(var p=0;p<r.length;p++){var d=r[p];if(d.show&&d.showLabel){var v;if(d.constructor==e.jqplot.CanvasAxisTickRenderer&&d.angle){var m=this.name=="xaxis"?1:-1;switch(d.labelPosition){case"auto":m*d.angle<0?v=-d.getWidth()+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2:v=-d._textRenderer.height*Math.sin(d._textRenderer.angle)/2;break;case"end":v=-d.getWidth()+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2;break;case"start":v=-d._textRenderer.height*Math.sin(d._textRenderer.angle)/2;break;case"middle":v=-d.getWidth()/2+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2;break;default:v=-d.getWidth()/2+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2}}else v=-d.getWidth()/2;var g=this.u2p(d.value)+v+"px";d._elem.css("left",g),d.pack()}}if(a){var y=this._label._elem.outerWidth(!0);this._label._elem.css("left",u+l/2-y/2+"px"),this.name=="xaxis"?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack()}}else{for(var p=0;p<r.length;p++){var d=r[p];if(d.show&&d.showLabel&&!d.isMinorTick){var v;if(d.constructor==e.jqplot.CanvasAxisTickRenderer&&d.angle){var m=this.name=="yaxis"?1:-1;switch(d.labelPosition){case"auto":case"end":m*d.angle<0?v=-d._textRenderer.height*Math.cos(-d._textRenderer.angle)/2:v=-d.getHeight()+d._textRenderer.height*Math.cos(d._textRenderer.angle)/2;break;case"start":d.angle>0?v=-d._textRenderer.height*Math.cos(-d._textRenderer.angle)/2:v=-d.getHeight()+d._textRenderer.height*Math.cos(d._textRenderer.angle)/2;break;case"middle":v=-d.getHeight()/2;break;default:v=-d.getHeight()/2}}else v=-d.getHeight()/2;var g=this.u2p(d.value)+v+"px";d._elem.css("top",g),d.pack()}}if(a){var b=this._label._elem.outerHeight(!0);this.name!=="yMidAxis"&&this._label._elem.css("top",o-l/2-b/2+"px"),this.name=="yaxis"?this._label._elem.css("left","0px"):this.name!=="yMidAxis"&&this._label._elem.css("right","0px"),this._label.pack()}}r=null}})(jQuery);