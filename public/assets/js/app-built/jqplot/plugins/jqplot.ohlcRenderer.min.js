/* jqPlot 1.0.8r1250 | (c) 2009-2013 Chris Leonello | jplot.com
   jsDate | (c) 2010-2013 Chris Leonello
 */

(function(e){e.jqplot.OHLCRenderer=function(){e.jqplot.LineRenderer.call(this),this.candleStick=!1,this.tickLength="auto",this.bodyWidth="auto",this.openColor=null,this.closeColor=null,this.wickColor=null,this.fillUpBody=!1,this.fillDownBody=!0,this.upBodyColor=null,this.downBodyColor=null,this.hlc=!1,this.lineWidth=1.5,this._tickLength,this._bodyWidth},e.jqplot.OHLCRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.OHLCRenderer.prototype.constructor=e.jqplot.OHLCRenderer,e.jqplot.OHLCRenderer.prototype.init=function(t){t=t||{},this.lineWidth=t.lineWidth||1.5,e.jqplot.LineRenderer.prototype.init.call(this,t),this._type="ohlc";var n=this._yaxis._dataBounds,r=this._plotData;if(r[0].length<5){this.renderer.hlc=!0;for(var i=0;i<r.length;i++){if(r[i][2]<n.min||n.min==null)n.min=r[i][2];if(r[i][1]>n.max||n.max==null)n.max=r[i][1]}}else for(var i=0;i<r.length;i++){if(r[i][3]<n.min||n.min==null)n.min=r[i][3];if(r[i][2]>n.max||n.max==null)n.max=r[i][2]}},e.jqplot.OHLCRenderer.prototype.draw=function(t,n,r){var i=this.data,s=this._xaxis.min,o=this._xaxis.max,u=0,f=i.length,l=this._xaxis.series_u2p,c=this._yaxis.series_u2p,h,p,d,v,m,g,y,b,w,E=this.renderer,S=r!=undefined?r:{},x=S.shadow!=undefined?S.shadow:this.shadow,T=S.fill!=undefined?S.fill:this.fill,N=S.fillAndStroke!=undefined?S.fillAndStroke:this.fillAndStroke;E.bodyWidth=S.bodyWidth!=undefined?S.bodyWidth:E.bodyWidth,E.tickLength=S.tickLength!=undefined?S.tickLength:E.tickLength,t.save();if(this.show){var C,k,L,A,O;for(var h=0;h<i.length;h++)i[h][0]<s?u=h:i[h][0]<o&&(f=h+1);var M=this.gridData[f-1][0]-this.gridData[u][0],_=f-u;try{var D=Math.abs(this._xaxis.series_u2p(parseInt(this._xaxis._intervalStats[0].sortedIntervals[0].interval,10))-this._xaxis.series_u2p(0))}catch(P){var D=M/_}E.candleStick?typeof E.bodyWidth=="number"?E._bodyWidth=E.bodyWidth:E._bodyWidth=Math.min(20,D/1.65):typeof E.tickLength=="number"?E._tickLength=E.tickLength:E._tickLength=Math.min(10,D/3.5);for(var h=u;h<f;h++)C=l(i[h][0]),E.hlc?(k=null,L=c(i[h][1]),A=c(i[h][2]),O=c(i[h][3])):(k=c(i[h][1]),L=c(i[h][2]),A=c(i[h][3]),O=c(i[h][4])),w={},E.candleStick&&!E.hlc?(g=E._bodyWidth,y=C-g/2,O<k?(E.wickColor?w.color=E.wickColor:E.downBodyColor&&(w.color=E.upBodyColor),d=e.extend(!0,{},S,w),E.shapeRenderer.draw(t,[[C,L],[C,O]],d),E.shapeRenderer.draw(t,[[C,k],[C,A]],d),w={},v=O,m=k-O,E.fillUpBody?w.fillRect=!0:(w.strokeRect=!0,g-=this.lineWidth,y=C-g/2),E.upBodyColor&&(w.color=E.upBodyColor,w.fillStyle=E.upBodyColor),b=[y,v,g,m]):O>k?(E.wickColor?w.color=E.wickColor:E.downBodyColor&&(w.color=E.downBodyColor),d=e.extend(!0,{},S,w),E.shapeRenderer.draw(t,[[C,L],[C,k]],d),E.shapeRenderer.draw(t,[[C,O],[C,A]],d),w={},v=k,m=O-k,E.fillDownBody?w.fillRect=!0:(w.strokeRect=!0,g-=this.lineWidth,y=C-g/2),E.downBodyColor&&(w.color=E.downBodyColor,w.fillStyle=E.downBodyColor),b=[y,v,g,m]):(E.wickColor&&(w.color=E.wickColor),d=e.extend(!0,{},S,w),E.shapeRenderer.draw(t,[[C,L],[C,A]],d),w={},w.fillRect=!1,w.strokeRect=!1,y=[C-g/2,k],v=[C+g/2,O],g=null,m=null,b=[y,v]),d=e.extend(!0,{},S,w),E.shapeRenderer.draw(t,b,d)):(p=S.color,E.openColor&&(S.color=E.openColor),E.hlc||E.shapeRenderer.draw(t,[[C-E._tickLength,k],[C,k]],S),S.color=p,E.wickColor&&(S.color=E.wickColor),E.shapeRenderer.draw(t,[[C,L],[C,A]],S),S.color=p,E.closeColor&&(S.color=E.closeColor),E.shapeRenderer.draw(t,[[C,O],[C+E._tickLength,O]],S),S.color=p)}t.restore()},e.jqplot.OHLCRenderer.prototype.drawShadow=function(e,t,n){},e.jqplot.OHLCRenderer.checkOptions=function(e,t,n){n.highlighter||(n.highlighter={showMarker:!1,tooltipAxes:"y",yvalues:4,formatString:'<table class="jqplot-highlighter"><tr><td>date:</td><td>%s</td></tr><tr><td>open:</td><td>%s</td></tr><tr><td>hi:</td><td>%s</td></tr><tr><td>low:</td><td>%s</td></tr><tr><td>close:</td><td>%s</td></tr></table>'})}})(jQuery);