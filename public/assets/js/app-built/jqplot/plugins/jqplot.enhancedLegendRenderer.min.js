/* jqPlot 1.0.8r1250 | (c) 2009-2013 Chris Leonello | jplot.com
   jsDate | (c) 2010-2013 Chris Leonello
 */

(function(e){e.jqplot.EnhancedLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.EnhancedLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.EnhancedLegendRenderer.prototype.constructor=e.jqplot.EnhancedLegendRenderer,e.jqplot.EnhancedLegendRenderer.prototype.init=function(t){this.numberRows=null,this.numberColumns=null,this.seriesToggle="normal",this.seriesToggleReplot=!1,this.disableIEFading=!0,e.extend(!0,this,t),this.seriesToggle&&e.jqplot.postDrawHooks.push(n)},e.jqplot.EnhancedLegendRenderer.prototype.draw=function(n,r){var i=this;if(this.show){var s=this._series,o,u="position:absolute;";u+=this.background?"background:"+this.background+";":"",u+=this.border?"border:"+this.border+";":"",u+=this.fontSize?"font-size:"+this.fontSize+";":"",u+=this.fontFamily?"font-family:"+this.fontFamily+";":"",u+=this.textColor?"color:"+this.textColor+";":"",u+=this.marginTop!=null?"margin-top:"+this.marginTop+";":"",u+=this.marginBottom!=null?"margin-bottom:"+this.marginBottom+";":"",u+=this.marginLeft!=null?"margin-left:"+this.marginLeft+";":"",u+=this.marginRight!=null?"margin-right:"+this.marginRight+";":"",this._elem=e('<table class="jqplot-table-legend" style="'+u+'"></table>'),this.seriesToggle&&this._elem.css("z-index","3");var f=!1,l=!1,h,p;this.numberRows?(h=this.numberRows,this.numberColumns?p=this.numberColumns:p=Math.ceil(s.length/h)):this.numberColumns?(p=this.numberColumns,h=Math.ceil(s.length/this.numberColumns)):(h=s.length,p=1);var d,v,m,g,y,b,w,E,S,x,T=0;for(d=s.length-1;d>=0;d--)if(p==1&&s[d]._stack||s[d].renderer.constructor==e.jqplot.BezierCurveRenderer)l=!0;for(d=0;d<h;d++){m=e(document.createElement("tr")),m.addClass("jqplot-table-legend"),l?m.prependTo(this._elem):m.appendTo(this._elem);for(v=0;v<p;v++){if(T<s.length&&(s[T].show||s[T].showLabel)){o=s[T],b=this.labels[T]||o.label.toString();if(b){var N=o.color;l?d==h-1?f=!1:f=!0:d>0?f=!0:f=!1,w=f?this.rowSpacing:"0",g=e(document.createElement("td")),g.addClass("jqplot-table-legend jqplot-table-legend-swatch"),g.css({textAlign:"center",paddingTop:w}),S=e(document.createElement("div")),S.addClass("jqplot-table-legend-swatch-outline"),x=e(document.createElement("div")),x.addClass("jqplot-table-legend-swatch"),x.css({backgroundColor:N,borderColor:N}),g.append(S.append(x)),y=e(document.createElement("td")),y.addClass("jqplot-table-legend jqplot-table-legend-label"),y.css("paddingTop",w),this.escapeHtml?y.text(b):y.html(b),l?(this.showLabels&&y.prependTo(m),this.showSwatches&&g.prependTo(m)):(this.showSwatches&&g.appendTo(m),this.showLabels&&y.appendTo(m));if(this.seriesToggle){var C;if(typeof this.seriesToggle=="string"||typeof this.seriesToggle=="number")if(!e.jqplot.use_excanvas||!this.disableIEFading)C=this.seriesToggle;this.showSwatches&&(g.bind("click",{series:o,speed:C,plot:r,replot:this.seriesToggleReplot},t),g.addClass("jqplot-seriesToggle")),this.showLabels&&(y.bind("click",{series:o,speed:C,plot:r,replot:this.seriesToggleReplot},t),y.addClass("jqplot-seriesToggle")),!o.show&&o.showLabel&&(g.addClass("jqplot-series-hidden"),y.addClass("jqplot-series-hidden"))}f=!0}}T++}g=y=S=x=null}}return this._elem};var t=function(t){var n=t.data,r=n.series,i=n.replot,s=n.plot,o=n.speed,u=r.index,a=!1;if(r.canvas._elem.is(":hidden")||!r.show)a=!0;var f=function(){if(i){var t={};e.isPlainObject(i)&&e.extend(!0,t,i),s.replot(t);if(a&&o){var n=s.series[u];n.shadowCanvas._elem&&n.shadowCanvas._elem.hide().fadeIn(o),n.canvas._elem.hide().fadeIn(o),n.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+n.index).hide().fadeIn(o)}}else{var n=s.series[u];n.canvas._elem.is(":hidden")||!n.show?((typeof s.options.legend.showSwatches=="undefined"||s.options.legend.showSwatches===!0)&&s.legend._elem.find("td").eq(u*2).addClass("jqplot-series-hidden"),(typeof s.options.legend.showLabels=="undefined"||s.options.legend.showLabels===!0)&&s.legend._elem.find("td").eq(u*2+1).addClass("jqplot-series-hidden")):((typeof s.options.legend.showSwatches=="undefined"||s.options.legend.showSwatches===!0)&&s.legend._elem.find("td").eq(u*2).removeClass("jqplot-series-hidden"),(typeof s.options.legend.showLabels=="undefined"||s.options.legend.showLabels===!0)&&s.legend._elem.find("td").eq(u*2+1).removeClass("jqplot-series-hidden"))}};r.toggleDisplay(t,f)},n=function(){if(this.legend.renderer.constructor==e.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle){var t=this.legend._elem.detach();this.eventCanvas._elem.after(t)}}})(jQuery);