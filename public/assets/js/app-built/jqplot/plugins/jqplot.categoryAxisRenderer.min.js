/* jqPlot 1.0.8r1250 | (c) 2009-2013 Chris Leonello | jplot.com
   jsDate | (c) 2010-2013 Chris Leonello
 */

(function(e){e.jqplot.CategoryAxisRenderer=function(t){e.jqplot.LinearAxisRenderer.call(this),this.sortMergedLabels=!1},e.jqplot.CategoryAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.CategoryAxisRenderer.prototype.constructor=e.jqplot.CategoryAxisRenderer,e.jqplot.CategoryAxisRenderer.prototype.init=function(t){this.groups=1,this.groupLabels=[],this._groupLabels=[],this._grouped=!1,this._barsPerGroup=null,this.reverse=!1,e.extend(!0,this,{tickOptions:{formatString:"%d"}},t);var n=this._dataBounds;for(var r=0;r<this._series.length;r++){var i=this._series[r];i.groups&&(this.groups=i.groups);var s=i.data;for(var o=0;o<s.length;o++)if(this.name=="xaxis"||this.name=="x2axis"){if(s[o][0]<n.min||n.min==null)n.min=s[o][0];if(s[o][0]>n.max||n.max==null)n.max=s[o][0]}else{if(s[o][1]<n.min||n.min==null)n.min=s[o][1];if(s[o][1]>n.max||n.max==null)n.max=s[o][1]}}this.groupLabels.length&&(this.groups=this.groupLabels.length)},e.jqplot.CategoryAxisRenderer.prototype.createTicks=function(){var t=this._ticks,n=this.ticks,r=this.name,i=this._dataBounds,s,o,u,f,l,c,h,p;if(n.length){if(this.groups>1&&!this._grouped){var d=n.length,v=parseInt(d/this.groups,10),m=0;for(var p=v;p<d;p+=v)n.splice(p+m,0," "),m++;this._grouped=!0}this.min=.5,this.max=n.length+.5;var g=this.max-this.min;this.numberTicks=2*n.length+1;for(p=0;p<n.length;p++){h=this.min+2*p*g/(this.numberTicks-1);var y=new this.tickRenderer(this.tickOptions);y.showLabel=!1,y.setTick(h,this.name),this._ticks.push(y);var y=new this.tickRenderer(this.tickOptions);y.label=n[p],y.showMark=!1,y.showGridline=!1,y.setTick(h+.5,this.name),this._ticks.push(y)}var y=new this.tickRenderer(this.tickOptions);y.showLabel=!1,y.setTick(h+1,this.name),this._ticks.push(y)}else{r=="xaxis"||r=="x2axis"?s=this._plotDimensions.width:s=this._plotDimensions.height,this.min!=null&&this.max!=null&&this.numberTicks!=null&&(this.tickInterval=null),this.min!=null&&this.max!=null&&this.tickInterval!=null&&parseInt((this.max-this.min)/this.tickInterval,10)!=(this.max-this.min)/this.tickInterval&&(this.tickInterval=null);var b=[],w=0,u=.5,f,E,S=!1;for(var p=0;p<this._series.length;p++){var x=this._series[p];for(var T=0;T<x.data.length;T++)this.name=="xaxis"||this.name=="x2axis"?E=x.data[T][0]:E=x.data[T][1],e.inArray(E,b)==-1&&(S=!0,w+=1,b.push(E))}S&&this.sortMergedLabels&&(typeof b[0]=="string"?b.sort():b.sort(function(e,t){return e-t})),this.ticks=b;for(var p=0;p<this._series.length;p++){var x=this._series[p];for(var T=0;T<x.data.length;T++){this.name=="xaxis"||this.name=="x2axis"?E=x.data[T][0]:E=x.data[T][1];var N=e.inArray(E,b)+1;this.name=="xaxis"||this.name=="x2axis"?x.data[T][0]=N:x.data[T][1]=N}}if(this.groups>1&&!this._grouped){var d=b.length,v=parseInt(d/this.groups,10),m=0;for(var p=v;p<d;p+=v+1)b[p]=" ";this._grouped=!0}f=w+.5,this.numberTicks==null&&(this.numberTicks=2*w+1);var g=f-u;this.min=u,this.max=f;var C=0,k=parseInt(3+s/10,10),v=parseInt(w/k,10);this.tickInterval==null&&(this.tickInterval=g/(this.numberTicks-1));for(var p=0;p<this.numberTicks;p++){h=this.min+p*this.tickInterval;var y=new this.tickRenderer(this.tickOptions);p/2==parseInt(p/2,10)?(y.showLabel=!1,y.showMark=!0):(v>0&&C<v?(y.showLabel=!1,C+=1):(y.showLabel=!0,C=0),y.label=y.formatter(y.formatString,b[(p-1)/2]),y.showMark=!1,y.showGridline=!1),y.setTick(h,this.name),this._ticks.push(y)}}},e.jqplot.CategoryAxisRenderer.prototype.draw=function(t,n){if(this.show){this.renderer.createTicks.call(this);var r=0,i;this._elem&&this._elem.emptyForce(),this._elem=this._elem||e('<div class="jqplot-axis jqplot-'+this.name+'" style="position:absolute;"></div>'),this.name=="xaxis"||this.name=="x2axis"?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions);if(this._label.show){var s=this._label.draw(t,n);s.appendTo(this._elem)}var o=this._ticks;for(var u=0;u<o.length;u++){var f=o[u];if(f.showLabel&&(!f.isMinorTick||this.showMinorTicks)){var s=f.draw(t,n);s.appendTo(this._elem)}}this._groupLabels=[];for(var u=0;u<this.groupLabels.length;u++){var s=e('<div style="position:absolute;" class="jqplot-'+this.name+'-groupLabel"></div>');s.html(this.groupLabels[u]),this._groupLabels.push(s),s.appendTo(this._elem)}}return this._elem},e.jqplot.CategoryAxisRenderer.prototype.set=function(){var t=0,n,r=0,i=0,s=this._label==null?!1:this._label.show;if(this.show){var o=this._ticks;for(var u=0;u<o.length;u++){var f=o[u];f.showLabel&&(!f.isMinorTick||this.showMinorTicks)&&(this.name=="xaxis"||this.name=="x2axis"?n=f._elem.outerHeight(!0):n=f._elem.outerWidth(!0),n>t&&(t=n))}var l=0;for(var u=0;u<this._groupLabels.length;u++){var c=this._groupLabels[u];this.name=="xaxis"||this.name=="x2axis"?n=c.outerHeight(!0):n=c.outerWidth(!0),n>l&&(l=n)}s&&(r=this._label._elem.outerWidth(!0),i=this._label._elem.outerHeight(!0)),this.name=="xaxis"?(t+=l+i,this._elem.css({height:t+"px",left:"0px",bottom:"0px"})):this.name=="x2axis"?(t+=l+i,this._elem.css({height:t+"px",left:"0px",top:"0px"})):this.name=="yaxis"?(t+=l+r,this._elem.css({width:t+"px",left:"0px",top:"0px"}),s&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",r+"px")):(t+=l+r,this._elem.css({width:t+"px",right:"0px",top:"0px"}),s&&this._label.constructor==e.jqplot.AxisLabelRenderer&&this._label._elem.css("width",r+"px"))}},e.jqplot.CategoryAxisRenderer.prototype.pack=function(t,n){var r=this._ticks,i=this.max,s=this.min,o=n.max,u=n.min,f=this._label==null?!1:this._label.show,l;for(var c in t)this._elem.css(c,t[c]);this._offsets=n;var h=o-u,p=i-s;this.reverse?(this.u2p=function(e){return u+(i-e)*h/p},this.p2u=function(e){return s+(e-u)*p/h},this.name=="xaxis"||this.name=="x2axis"?(this.series_u2p=function(e){return(i-e)*h/p},this.series_p2u=function(e){return e*p/h+i}):(this.series_u2p=function(e){return(s-e)*h/p},this.series_p2u=function(e){return e*p/h+s})):(this.u2p=function(e){return(e-s)*h/p+u},this.p2u=function(e){return(e-u)*p/h+s},this.name=="xaxis"||this.name=="x2axis"?(this.series_u2p=function(e){return(e-s)*h/p},this.series_p2u=function(e){return e*p/h+s}):(this.series_u2p=function(e){return(e-i)*h/p},this.series_p2u=function(e){return e*p/h+i}));if(this.show)if(this.name=="xaxis"||this.name=="x2axis"){for(l=0;l<r.length;l++){var d=r[l];if(d.show&&d.showLabel){var v;if(d.constructor==e.jqplot.CanvasAxisTickRenderer&&d.angle){var m=this.name=="xaxis"?1:-1;switch(d.labelPosition){case"auto":m*d.angle<0?v=-d.getWidth()+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2:v=-d._textRenderer.height*Math.sin(d._textRenderer.angle)/2;break;case"end":v=-d.getWidth()+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2;break;case"start":v=-d._textRenderer.height*Math.sin(d._textRenderer.angle)/2;break;case"middle":v=-d.getWidth()/2+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2;break;default:v=-d.getWidth()/2+d._textRenderer.height*Math.sin(-d._textRenderer.angle)/2}}else v=-d.getWidth()/2;var g=this.u2p(d.value)+v+"px";d._elem.css("left",g),d.pack()}}var y=["bottom",0];if(f){var b=this._label._elem.outerWidth(!0);this._label._elem.css("left",u+h/2-b/2+"px"),this.name=="xaxis"?(this._label._elem.css("bottom","0px"),y=["bottom",this._label._elem.outerHeight(!0)]):(this._label._elem.css("top","0px"),y=["top",this._label._elem.outerHeight(!0)]),this._label.pack()}var w=parseInt(this._ticks.length/this.groups,10)+1;for(l=0;l<this._groupLabels.length;l++){var E=0,S=0;for(var x=l*w;x<(l+1)*w;x++){if(x>=this._ticks.length-1)continue;if(this._ticks[x]._elem&&this._ticks[x].label!=" "){var d=this._ticks[x]._elem,c=d.position();E+=c.left+d.outerWidth(!0)/2,S++}}E/=S,this._groupLabels[l].css({left:E-this._groupLabels[l].outerWidth(!0)/2}),this._groupLabels[l].css(y[0],y[1])}}else{for(l=0;l<r.length;l++){var d=r[l];if(d.show&&d.showLabel){var v;if(d.constructor==e.jqplot.CanvasAxisTickRenderer&&d.angle){var m=this.name=="yaxis"?1:-1;switch(d.labelPosition){case"auto":case"end":m*d.angle<0?v=-d._textRenderer.height*Math.cos(-d._textRenderer.angle)/2:v=-d.getHeight()+d._textRenderer.height*Math.cos(d._textRenderer.angle)/2;break;case"start":d.angle>0?v=-d._textRenderer.height*Math.cos(-d._textRenderer.angle)/2:v=-d.getHeight()+d._textRenderer.height*Math.cos(d._textRenderer.angle)/2;break;case"middle":v=-d.getHeight()/2;break;default:v=-d.getHeight()/2}}else v=-d.getHeight()/2;var g=this.u2p(d.value)+v+"px";d._elem.css("top",g),d.pack()}}var y=["left",0];if(f){var T=this._label._elem.outerHeight(!0);this._label._elem.css("top",o-h/2-T/2+"px"),this.name=="yaxis"?(this._label._elem.css("left","0px"),y=["left",this._label._elem.outerWidth(!0)]):(this._label._elem.css("right","0px"),y=["right",this._label._elem.outerWidth(!0)]),this._label.pack()}var w=parseInt(this._ticks.length/this.groups,10)+1;for(l=0;l<this._groupLabels.length;l++){var E=0,S=0;for(var x=l*w;x<(l+1)*w;x++){if(x>=this._ticks.length-1)continue;if(this._ticks[x]._elem&&this._ticks[x].label!=" "){var d=this._ticks[x]._elem,c=d.position();E+=c.top+d.outerHeight()/2,S++}}E/=S,this._groupLabels[l].css({top:E-this._groupLabels[l].outerHeight()/2}),this._groupLabels[l].css(y[0],y[1])}}}})(jQuery);