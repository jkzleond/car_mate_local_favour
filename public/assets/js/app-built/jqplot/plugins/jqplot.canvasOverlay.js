/**
 * jqPlot
 * Pure JavaScript plotting plugin using jQuery
 *
 * Version: 1.0.8
 * Revision: 1250
 *
 * Copyright (c) 2009-2013 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT (http://www.opensource.org/licenses/mit-license.php) and GPL 
 * version 2.0 (http://www.gnu.org/licenses/gpl-2.0.html) licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * Although not required, the author would appreciate an email letting him 
 * know of any substantial use of jqPlot.  You can reach the author at: 
 * chris at jqplot dot com or see http://www.jqplot.com/info.php .
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * sprintf functions contained in jqplot.sprintf.js by Ash Searle:
 *
 *     version 2007.04.27
 *     author Ash Searle
 *     http://hexmen.com/blog/2007/03/printf-sprintf/
 *     http://hexmen.com/js/sprintf.js
 *     The author (Ash Searle) has placed this code in the public domain:
 *     "This code is unrestricted: you are free to use it however you like."
 * 
 */

(function(e){function n(){this.uid=null,this.type=null,this.gridStart=null,this.gridStop=null,this.tooltipWidthFactor=0,this.options={name:null,show:!0,lineWidth:2,lineCap:"round",color:"#666666",shadow:!0,shadowAngle:45,shadowOffset:1,shadowDepth:3,shadowAlpha:"0.07",xaxis:"xaxis",yaxis:"yaxis",showTooltip:!1,showTooltipPrecision:.6,tooltipLocation:"nw",fadeTooltip:!0,tooltipFadeSpeed:"fast",tooltipOffset:4,tooltipFormatString:"%d, %d"}}function r(t){n.call(this),this.type="rectangle";var r={xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null};e.extend(!0,this.options,r,t),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function i(t){n.call(this),this.type="line";var r={start:[],stop:[]};e.extend(!0,this.options,r,t),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function s(t){n.call(this),this.type="horizontalLine";var r={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null};e.extend(!0,this.options,r,t),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function o(t){n.call(this),this.type="dashedHorizontalLine";var r={y:null,xmin:null,xmax:null,xOffset:"6px",xminOffset:null,xmaxOffset:null,dashPattern:[8,8]};e.extend(!0,this.options,r,t),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function u(t){n.call(this),this.type="verticalLine";var r={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null};e.extend(!0,this.options,r,t),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function a(t){n.call(this),this.type="dashedVerticalLine",this.start=null,this.stop=null;var r={x:null,ymin:null,ymax:null,yOffset:"6px",yminOffset:null,ymaxOffset:null,dashPattern:[8,8]};e.extend(!0,this.options,r,t),this.options.showTooltipPrecision<.01&&(this.options.showTooltipPrecision=.01)}function f(t,n,r,i){var s=t.plugins.canvasOverlay,o=s._tooltipElem,u=n.options,a,f;o.html(e.jqplot.sprintf(u.tooltipFormatString,i[0],i[1]));switch(u.tooltipLocation){case"nw":a=r[0]+t._gridPadding.left-o.outerWidth(!0)-u.tooltipOffset,f=r[1]+t._gridPadding.top-u.tooltipOffset-o.outerHeight(!0);break;case"n":a=r[0]+t._gridPadding.left-o.outerWidth(!0)/2,f=r[1]+t._gridPadding.top-u.tooltipOffset-o.outerHeight(!0);break;case"ne":a=r[0]+t._gridPadding.left+u.tooltipOffset,f=r[1]+t._gridPadding.top-u.tooltipOffset-o.outerHeight(!0);break;case"e":a=r[0]+t._gridPadding.left+u.tooltipOffset,f=r[1]+t._gridPadding.top-o.outerHeight(!0)/2;break;case"se":a=r[0]+t._gridPadding.left+u.tooltipOffset,f=r[1]+t._gridPadding.top+u.tooltipOffset;break;case"s":a=r[0]+t._gridPadding.left-o.outerWidth(!0)/2,f=r[1]+t._gridPadding.top+u.tooltipOffset;break;case"sw":a=r[0]+t._gridPadding.left-o.outerWidth(!0)-u.tooltipOffset,f=r[1]+t._gridPadding.top+u.tooltipOffset;break;case"w":a=r[0]+t._gridPadding.left-o.outerWidth(!0)-u.tooltipOffset,f=r[1]+t._gridPadding.top-o.outerHeight(!0)/2;break;default:a=r[0]+t._gridPadding.left-o.outerWidth(!0)-u.tooltipOffset,f=r[1]+t._gridPadding.top-u.tooltipOffset-o.outerHeight(!0)}o.css("left",a),o.css("top",f),u.fadeTooltip?o.stop(!0,!0).fadeIn(u.tooltipFadeSpeed):o.show(),o=null}function l(e,t,n,r){var i=e[0],s=e[1],o=Math.round(n[0]),u=Math.round(n[1]),a=Math.round(t[0]),f=Math.round(t[1]),l=Math.sqrt(Math.pow(o-a,2)+Math.pow(u-f,2)),c=r*l,h=Math.abs((a-o)*(s-u)-(f-u)*(i-o)),p=h<c?!0:!1;return p}function c(e,t,n,r){var i=e[0],s=e[1],o=Math.round(n[0]),u=Math.round(n[1]),a=Math.round(t[0]),f=Math.round(t[1]),l;o>a&&(l=o,o=a,a=l),u>f&&(l=u,u=f,f=l);var c=i>=o&&i<=a&&s>=u&&s<=f;return c}function h(e,t,n,r,i){var s=i.plugins.canvasOverlay,o=s.objects,u=o.length,a,h=!1,p;for(var d=0;d<u;d++){a=o[d];if(a.options.showTooltip){var v;a.type==="rectangle"?v=c([t.x,t.y],a.gridStart,a.gridStop,a.tooltipWidthFactor):v=l([t.x,t.y],a.gridStart,a.gridStop,a.tooltipWidthFactor),n=[i.axes[a.options.xaxis].series_p2u(t.x),i.axes[a.options.yaxis].series_p2u(t.y)];if(v&&s.highlightObjectIndex==null){switch(a.type){case"line":f(i,a,[t.x,t.y],n);break;case"horizontalLine":case"dashedHorizontalLine":f(i,a,[t.x,a.gridStart[1]],[n[0],a.options.y]);break;case"verticalLine":case"dashedVerticalLine":f(i,a,[a.gridStart[0],t.y],[a.options.x,n[1]]);break;case"rectangle":f(i,a,[a.gridStart[0],t.y],[a.options.x,n[1]]);break;default:}s.highlightObjectIndex=d,h=!0;break}if(v&&s.highlightObjectIndex!==d){p=s._tooltipElem,a.fadeTooltip?p.fadeOut(a.tooltipFadeSpeed):p.hide();switch(a.type){case"line":f(i,a,[t.x,t.y],n);break;case"horizontalLine":case"dashedHorizontalLine":f(i,a,[t.x,a.gridStart[1]],[n[0],a.options.y]);break;case"verticalLine":case"dashedVerticalLine":f(i,a,[a.gridStart[0],t.y],[a.options.x,n[1]]);break;case"rectangle":f(i,a,[a.gridStart[0],t.y],[a.options.x,n[1]]);break;default:}s.highlightObjectIndex=d,h=!0;break}if(v){switch(a.type){case"line":f(i,a,[t.x,t.y],n);break;case"horizontalLine":case"dashedHorizontalLine":f(i,a,[t.x,a.gridStart[1]],[n[0],a.options.y]);break;case"verticalLine":case"dashedVerticalLine":f(i,a,[a.gridStart[0],t.y],[a.options.x,n[1]]);break;case"rectangle":f(i,a,[a.gridStart[0],t.y],[a.options.x,n[1]]);break;default:}h=!0;break}}}!h&&s.highlightObjectIndex!==null&&(p=s._tooltipElem,a=s.getObject(s.highlightObjectIndex),a.fadeTooltip?p.fadeOut(a.tooltipFadeSpeed):p.hide(),s.highlightObjectIndex=null)}var t=0;e.jqplot.CanvasOverlay=function(t){var n=t||{};this.options={show:e.jqplot.config.enablePlugins,deferDraw:!1},this.objects=[],this.objectNames=[],this.canvas=null,this.markerRenderer=new e.jqplot.MarkerRenderer({style:"line"}),this.markerRenderer.init(),this.highlightObjectIndex=null;if(n.objects){var r=n.objects,i;for(var s=0;s<r.length;s++){i=r[s];for(var o in i)switch(o){case"line":this.addLine(i[o]);break;case"horizontalLine":this.addHorizontalLine(i[o]);break;case"dashedHorizontalLine":this.addDashedHorizontalLine(i[o]);break;case"verticalLine":this.addVerticalLine(i[o]);break;case"dashedVerticalLine":this.addDashedVerticalLine(i[o]);break;case"rectangle":this.addRectangle(i[o]);break;default:}}}e.extend(!0,this.options,n)},e.jqplot.CanvasOverlay.postPlotInit=function(t,n,r){var i=r||{};this.plugins.canvasOverlay=new e.jqplot.CanvasOverlay(i.canvasOverlay)},r.prototype=new n,r.prototype.constructor=r,i.prototype=new n,i.prototype.constructor=i,s.prototype=new n,s.prototype.constructor=s,o.prototype=new n,o.prototype.constructor=o,u.prototype=new n,u.prototype.constructor=u,a.prototype=new n,a.prototype.constructor=a,e.jqplot.CanvasOverlay.prototype.addLine=function(e){var n=new i(e);n.uid=t++,this.objects.push(n),this.objectNames.push(n.options.name)},e.jqplot.CanvasOverlay.prototype.addHorizontalLine=function(e){var n=new s(e);n.uid=t++,this.objects.push(n),this.objectNames.push(n.options.name)},e.jqplot.CanvasOverlay.prototype.addDashedHorizontalLine=function(e){var n=new o(e);n.uid=t++,this.objects.push(n),this.objectNames.push(n.options.name)},e.jqplot.CanvasOverlay.prototype.addVerticalLine=function(e){var n=new u(e);n.uid=t++,this.objects.push(n),this.objectNames.push(n.options.name)},e.jqplot.CanvasOverlay.prototype.addDashedVerticalLine=function(e){var n=new a(e);n.uid=t++,this.objects.push(n),this.objectNames.push(n.options.name)},e.jqplot.CanvasOverlay.prototype.addRectangle=function(e){var n=new r(e);n.uid=t++,this.objects.push(n),this.objectNames.push(n.options.name)},e.jqplot.CanvasOverlay.prototype.removeObject=function(t){if(e.type(t)=="number")this.objects.splice(t,1),this.objectNames.splice(t,1);else{var n=e.inArray(t,this.objectNames);n!=-1&&(this.objects.splice(n,1),this.objectNames.splice(n,1))}},e.jqplot.CanvasOverlay.prototype.getObject=function(t){if(e.type(t)=="number")return this.objects[t];var n=e.inArray(t,this.objectNames);if(n!=-1)return this.objects[n]},e.jqplot.CanvasOverlay.prototype.get=e.jqplot.CanvasOverlay.prototype.getObject,e.jqplot.CanvasOverlay.prototype.clear=function(e){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight())},e.jqplot.CanvasOverlay.prototype.draw=function(t){var n,r=this.objects,i=this.markerRenderer,s,o;if(this.options.show){this.canvas._ctx.clearRect(0,0,this.canvas.getWidth(),this.canvas.getHeight());for(var u=0;u<r.length;u++){n=r[u];var a=e.extend(!0,{},n.options);if(n.options.show){i.shadow=n.options.shadow,n.tooltipWidthFactor=n.options.lineWidth/n.options.showTooltipPrecision;switch(n.type){case"line":i.style="line",a.closePath=!1,s=[t.axes[n.options.xaxis].series_u2p(n.options.start[0]),t.axes[n.options.yaxis].series_u2p(n.options.start[1])],o=[t.axes[n.options.xaxis].series_u2p(n.options.stop[0]),t.axes[n.options.yaxis].series_u2p(n.options.stop[1])],n.gridStart=s,n.gridStop=o,i.draw(s,o,this.canvas._ctx,a);break;case"horizontalLine":if(n.options.y!=null){i.style="line",a.closePath=!1;var f=t.axes[n.options.xaxis],l,c,h=t.axes[n.options.yaxis].series_u2p(n.options.y),p=n.options.xminOffset||n.options.xOffset,d=n.options.xmaxOffset||n.options.xOffset;n.options.xmin!=null?l=f.series_u2p(n.options.xmin):p!=null&&(e.type(p)=="number"?l=f.series_u2p(f.min+p):e.type(p)=="string"&&(l=f.series_u2p(f.min)+parseFloat(p))),n.options.xmax!=null?c=f.series_u2p(n.options.xmax):d!=null&&(e.type(d)=="number"?c=f.series_u2p(f.max-d):e.type(d)=="string"&&(c=f.series_u2p(f.max)-parseFloat(d))),c!=null&&l!=null&&(n.gridStart=[l,h],n.gridStop=[c,h],i.draw([l,h],[c,h],this.canvas._ctx,a))}break;case"dashedHorizontalLine":var v=n.options.dashPattern,m=0;for(var g=0;g<v.length;g++)m+=v[g];if(n.options.y!=null){i.style="line",a.closePath=!1;var f=t.axes[n.options.xaxis],l,c,h=t.axes[n.options.yaxis].series_u2p(n.options.y),p=n.options.xminOffset||n.options.xOffset,d=n.options.xmaxOffset||n.options.xOffset;n.options.xmin!=null?l=f.series_u2p(n.options.xmin):p!=null&&(e.type(p)=="number"?l=f.series_u2p(f.min+p):e.type(p)=="string"&&(l=f.series_u2p(f.min)+parseFloat(p))),n.options.xmax!=null?c=f.series_u2p(n.options.xmax):d!=null&&(e.type(d)=="number"?c=f.series_u2p(f.max-d):e.type(d)=="string"&&(c=f.series_u2p(f.max)-parseFloat(d)));if(c!=null&&l!=null){n.gridStart=[l,h],n.gridStop=[c,h];var y=Math.ceil((c-l)/m),b=l,w;for(var g=0;g<y;g++)for(var E=0;E<v.length;E+=2)w=b+v[E],i.draw([b,h],[w,h],this.canvas._ctx,a),b+=v[E],E<v.length-1&&(b+=v[E+1])}}break;case"verticalLine":if(n.options.x!=null){i.style="line",a.closePath=!1;var S=t.axes[n.options.yaxis],x,T,N=t.axes[n.options.xaxis].series_u2p(n.options.x),C=n.options.yminOffset||n.options.yOffset,k=n.options.ymaxOffset||n.options.yOffset;n.options.ymin!=null?x=S.series_u2p(n.options.ymin):C!=null&&(e.type(C)=="number"?x=S.series_u2p(S.min-C):e.type(C)=="string"&&(x=S.series_u2p(S.min)-parseFloat(C))),n.options.ymax!=null?T=S.series_u2p(n.options.ymax):k!=null&&(e.type(k)=="number"?T=S.series_u2p(S.max+k):e.type(k)=="string"&&(T=S.series_u2p(S.max)+parseFloat(k))),T!=null&&x!=null&&(n.gridStart=[N,x],n.gridStop=[N,T],i.draw([N,x],[N,T],this.canvas._ctx,a))}break;case"dashedVerticalLine":var v=n.options.dashPattern,m=0;for(var g=0;g<v.length;g++)m+=v[g];if(n.options.x!=null){i.style="line",a.closePath=!1;var S=t.axes[n.options.yaxis],x,T,N=t.axes[n.options.xaxis].series_u2p(n.options.x),C=n.options.yminOffset||n.options.yOffset,k=n.options.ymaxOffset||n.options.yOffset;n.options.ymin!=null?x=S.series_u2p(n.options.ymin):C!=null&&(e.type(C)=="number"?x=S.series_u2p(S.min-C):e.type(C)=="string"&&(x=S.series_u2p(S.min)-parseFloat(C))),n.options.ymax!=null?T=S.series_u2p(n.options.ymax):k!=null&&(e.type(k)=="number"?T=S.series_u2p(S.max+k):e.type(k)=="string"&&(T=S.series_u2p(S.max)+parseFloat(k)));if(T!=null&&x!=null){n.gridStart=[N,x],n.gridStop=[N,T];var y=Math.ceil((x-T)/m),L=(y*m-(x-T))/2,b=x,w,A,O;for(var g=0;g<y;g++)for(var E=0;E<v.length;E+=2)w=b-v[E],w<T&&(w=T),b<T&&(b=T),i.draw([N,b],[N,w],this.canvas._ctx,a),b-=v[E],E<v.length-1&&(b-=v[E+1])}}break;case"rectangle":i.style="line",a.closePath=!0;var f=t.axes[n.options.xaxis],l,c,h=t.axes[n.options.yaxis].series_u2p(n.options.y),p=n.options.xminOffset||n.options.xOffset,d=n.options.xmaxOffset||n.options.xOffset;n.options.xmin!=null?l=f.series_u2p(n.options.xmin):p!=null&&(e.type(p)=="number"?l=f.series_u2p(f.min+p):e.type(p)=="string"&&(l=f.series_u2p(f.min)+parseFloat(p))),n.options.xmax!=null?c=f.series_u2p(n.options.xmax):d!=null&&(e.type(d)=="number"?c=f.series_u2p(f.max-d):e.type(d)=="string"&&(c=f.series_u2p(f.max)-parseFloat(d)));var S=t.axes[n.options.yaxis],x,T,N=t.axes[n.options.xaxis].series_u2p(n.options.x),C=n.options.yminOffset||n.options.yOffset,k=n.options.ymaxOffset||n.options.yOffset;n.options.ymin!=null?x=S.series_u2p(n.options.ymin):C!=null&&(e.type(C)=="number"?x=S.series_u2p(S.min-C):e.type(C)=="string"&&(x=S.series_u2p(S.min)-parseFloat(C))),n.options.ymax!=null?T=S.series_u2p(n.options.ymax):k!=null&&(e.type(k)=="number"?T=S.series_u2p(S.max+k):e.type(k)=="string"&&(T=S.series_u2p(S.max)+parseFloat(k))),c!=null&&l!=null&&T!=null&&x!=null&&(n.gridStart=[l,x],n.gridStop=[c,T],this.canvas._ctx.fillStyle=n.options.color,this.canvas._ctx.fillRect(l,x,c-l,T-x));break;default:}}}}},e.jqplot.CanvasOverlay.postPlotDraw=function(){var t=this.plugins.canvasOverlay;t&&t.highlightCanvas&&(t.highlightCanvas.resetCanvas(),t.highlightCanvas=null),t.canvas=new e.jqplot.GenericCanvas,this.eventCanvas._elem.before(t.canvas.createElement(this._gridPadding,"jqplot-overlayCanvas-canvas",this._plotDimensions,this)),t.canvas.setContext(),t.deferDraw||t.draw(this);var n=document.createElement("div");t._tooltipElem=e(n),n=null,t._tooltipElem.addClass("jqplot-canvasOverlay-tooltip"),t._tooltipElem.css({position:"absolute",display:"none"}),this.eventCanvas._elem.before(t._tooltipElem),this.eventCanvas._elem.bind("mouseleave",{elem:t._tooltipElem},function(e){e.data.elem.hide()});var t=null},e.jqplot.postInitHooks.push(e.jqplot.CanvasOverlay.postPlotInit),e.jqplot.postDrawHooks.push(e.jqplot.CanvasOverlay.postPlotDraw),e.jqplot.eventListenerHooks.push(["jqplotMouseMove",h])})(jQuery);