/**
 * jqPlot
 * Pure JavaScript plotting plugin using jQuery
 *
 * Version: 1.0.8
 * Revision: 1250
 *
 * Copyright (c) 2009-2013 Chris Leonello
 * jqPlot is currently available for use in all personal or commercial projects 
 * under both the MIT (http://www.opensource.org/licenses/mit-license.php) and GPL 
 * version 2.0 (http://www.gnu.org/licenses/gpl-2.0.html) licenses. This means that you can 
 * choose the license that best suits your project and use it accordingly. 
 *
 * Although not required, the author would appreciate an email letting him 
 * know of any substantial use of jqPlot.  You can reach the author at: 
 * chris at jqplot dot com or see http://www.jqplot.com/info.php .
 *
 * If you are feeling kind and generous, consider supporting the project by
 * making a donation at: http://www.jqplot.com/donate.php .
 *
 * sprintf functions contained in jqplot.sprintf.js by Ash Searle:
 *
 *     version 2007.04.27
 *     author Ash Searle
 *     http://hexmen.com/blog/2007/03/printf-sprintf/
 *     http://hexmen.com/js/sprintf.js
 *     The author (Ash Searle) has placed this code in the public domain:
 *     "This code is unrestricted: you are free to use it however you like."
 * 
 */

(function(e){function r(e,t,n){e.plugins.bubbleRenderer.highlightLabelCanvas.empty();var r=e.series[t],i=e.plugins.bubbleRenderer.highlightCanvas,s=i._ctx;s.clearRect(0,0,s.canvas.width,s.canvas.height),r._highlightedPoint=n,e.plugins.bubbleRenderer.highlightedSeriesIndex=t;var o=r.highlightColorGenerator.get(n),u=r.gridData[n][0],a=r.gridData[n][1],f=r.gridData[n][2];s.save(),s.fillStyle=o,s.strokeStyle=o,s.lineWidth=1,s.beginPath(),s.arc(u,a,f,0,2*Math.PI,0),s.closePath(),s.fill(),s.restore(),r.labels[n]&&(e.plugins.bubbleRenderer.highlightLabel=r.labels[n].clone(),e.plugins.bubbleRenderer.highlightLabel.appendTo(e.plugins.bubbleRenderer.highlightLabelCanvas),e.plugins.bubbleRenderer.highlightLabel.addClass("jqplot-bubble-label-highlight"))}function i(e){var t=e.plugins.bubbleRenderer.highlightCanvas,n=e.plugins.bubbleRenderer.highlightedSeriesIndex;e.plugins.bubbleRenderer.highlightLabelCanvas.empty(),t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var r=0;r<e.series.length;r++)e.series[r]._highlightedPoint=null;e.plugins.bubbleRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight")}function s(e,t,n,s,o){if(s){var u=s.seriesIndex,a=s.pointIndex,f=[u,a,s.data,o.series[u].gridData[a][2]],l=jQuery.Event("jqplotDataMouseOver");l.pageX=e.pageX,l.pageY=e.pageY,o.target.trigger(l,f);if(o.series[f[0]].highlightMouseOver&&(f[0]!=o.plugins.bubbleRenderer.highlightedSeriesIndex||f[1]!=o.series[f[0]]._highlightedPoint)){var c=jQuery.Event("jqplotDataHighlight");c.which=e.which,c.pageX=e.pageX,c.pageY=e.pageY,o.target.trigger(c,f),r(o,f[0],f[1])}}else s==null&&i(o)}function o(e,t,n,s,o){if(s){var u=s.seriesIndex,a=s.pointIndex,f=[u,a,s.data,o.series[u].gridData[a][2]];if(o.series[f[0]].highlightMouseDown&&(f[0]!=o.plugins.bubbleRenderer.highlightedSeriesIndex||f[1]!=o.series[f[0]]._highlightedPoint)){var l=jQuery.Event("jqplotDataHighlight");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,o.target.trigger(l,f),r(o,f[0],f[1])}}else s==null&&i(o)}function u(e,t,n,r,s){var o=s.plugins.bubbleRenderer.highlightedSeriesIndex;o!=null&&s.series[o].highlightMouseDown&&i(s)}function a(e,t,n,r,i){if(r){var s=r.seriesIndex,o=r.pointIndex,u=[s,o,r.data,i.series[s].gridData[o][2]],a=jQuery.Event("jqplotDataClick");a.which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,i.target.trigger(a,u)}}function f(e,t,n,r,s){if(r){var o=r.seriesIndex,u=r.pointIndex,a=[o,u,r.data,s.series[o].gridData[u][2]],f=s.plugins.bubbleRenderer.highlightedSeriesIndex;f!=null&&s.series[f].highlightMouseDown&&i(s);var l=jQuery.Event("jqplotDataRightClick");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,s.target.trigger(l,a)}}function l(){this.plugins.bubbleRenderer&&this.plugins.bubbleRenderer.highlightCanvas&&(this.plugins.bubbleRenderer.highlightCanvas.resetCanvas(),this.plugins.bubbleRenderer.highlightCanvas=null),this.plugins.bubbleRenderer={highlightedSeriesIndex:null},this.plugins.bubbleRenderer.highlightCanvas=new e.jqplot.GenericCanvas,this.plugins.bubbleRenderer.highlightLabel=null,this.plugins.bubbleRenderer.highlightLabelCanvas=e('<div style="position:absolute;"></div>');var t=this._gridPadding.top,n=this._gridPadding.left,r=this._plotDimensions.width-this._gridPadding.left-this._gridPadding.right,i=this._plotDimensions.height-this._gridPadding.top-this._gridPadding.bottom;this.plugins.bubbleRenderer.highlightLabelCanvas.css({top:t,left:n,width:r+"px",height:i+"px"}),this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-bubbleRenderer-highlight-canvas",this._plotDimensions,this)),this.eventCanvas._elem.before(this.plugins.bubbleRenderer.highlightLabelCanvas);var s=this.plugins.bubbleRenderer.highlightCanvas.setContext()}function c(t,n,r){r=r||{},r.axesDefaults=r.axesDefaults||{},r.seriesDefaults=r.seriesDefaults||{};var i=!1;if(r.seriesDefaults.renderer==e.jqplot.BubbleRenderer)i=!0;else if(r.series)for(var s=0;s<r.series.length;s++)r.series[s].renderer==e.jqplot.BubbleRenderer&&(i=!0);i&&(r.axesDefaults.renderer=e.jqplot.BubbleAxisRenderer,r.sortData=!1)}var t=function(e){return Math.max.apply(Math,e)},n=function(e){return Math.min.apply(Math,e)};e.jqplot.BubbleRenderer=function(){e.jqplot.LineRenderer.call(this)},e.jqplot.BubbleRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.BubbleRenderer.prototype.constructor=e.jqplot.BubbleRenderer,e.jqplot.BubbleRenderer.prototype.init=function(t,n){this.varyBubbleColors=!0,this.autoscaleBubbles=!0,this.autoscaleMultiplier=1,this.autoscalePointsFactor=-0.07,this.escapeHtml=!0,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.bubbleAlpha=1,this.highlightAlpha=null,this.bubbleGradients=!1,this.showLabels=!0,this.radii=[],this.maxRadius=0,this._highlightedPoint=null,this.labels=[],this.bubbleCanvases=[],this._type="bubble",t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1),e.extend(!0,this,t),this.highlightAlpha==null&&(this.highlightAlpha=this.bubbleAlpha,this.bubbleGradients&&(this.highlightAlpha=.35)),this.autoscaleMultiplier=this.autoscaleMultiplier*Math.pow(this.data.length,this.autoscalePointsFactor),this._highlightedPoint=null;var r;for(var i=0;i<this.data.length;i++){var c=null,h=this.data[i];this.maxRadius=Math.max(this.maxRadius,h[2]),h[3]&&typeof h[3]=="object"&&(c=h[3].color),c==null&&this.seriesColors[i]!=null&&(c=this.seriesColors[i]),c&&this.bubbleAlpha<1&&(r=e.jqplot.getColorComponents(c),c="rgba("+r[0]+", "+r[1]+", "+r[2]+", "+this.bubbleAlpha+")"),c&&(this.seriesColors[i]=c)}this.varyBubbleColors||(this.seriesColors=[this.color]),this.colorGenerator=new e.jqplot.ColorGenerator(this.seriesColors);if(this.highlightColors.length==0)for(var i=0;i<this.seriesColors.length;i++){var p=e.jqplot.getColorComponents(this.seriesColors[i]),d=[p[0],p[1],p[2]],v=d[0]+d[1]+d[2];for(var m=0;m<3;m++)d[m]=v>570?d[m]*.8:d[m]+.3*(255-d[m]),d[m]=parseInt(d[m],10);this.highlightColors.push("rgba("+d[0]+","+d[1]+","+d[2]+", "+this.highlightAlpha+")")}this.highlightColorGenerator=new e.jqplot.ColorGenerator(this.highlightColors);var g={fill:!0,isarc:!0,angle:this.shadowAngle,alpha:this.shadowAlpha,closePath:!0};this.renderer.shadowRenderer.init(g),this.canvas=new e.jqplot.DivCanvas,this.canvas._plotDimensions=this._plotDimensions,n.eventListenerHooks.addOnce("jqplotMouseMove",s),n.eventListenerHooks.addOnce("jqplotMouseDown",o),n.eventListenerHooks.addOnce("jqplotMouseUp",u),n.eventListenerHooks.addOnce("jqplotClick",a),n.eventListenerHooks.addOnce("jqplotRightClick",f),n.postDrawHooks.addOnce(l)},e.jqplot.BubbleRenderer.prototype.setGridData=function(e){var n=this._xaxis.series_u2p,r=this._yaxis.series_u2p,i=this._plotData;this.gridData=[];var s=[];this.radii=[];var o=Math.min(e._height,e._width);for(var u=0;u<this.data.length;u++)i[u]!=null&&(this.gridData.push([n.call(this._xaxis,i[u][0]),r.call(this._yaxis,i[u][1]),i[u][2]]),this.radii.push([u,i[u][2]]),s.push(i[u][2]));var a,f,l=this.maxRadius=t(s),c=this.gridData.length;if(this.autoscaleBubbles)for(var u=0;u<c;u++)f=s[u]/l,a=this.autoscaleMultiplier*o/6,this.gridData[u][2]=a*f;this.radii.sort(function(e,t){return t[1]-e[1]})},e.jqplot.BubbleRenderer.prototype.makeGridData=function(e,n){var r=this._xaxis.series_u2p,i=this._yaxis.series_u2p,s=[],o=[];this.radii=[];var u=Math.min(n._height,n._width);for(var a=0;a<e.length;a++)e[a]!=null&&(s.push([r.call(this._xaxis,e[a][0]),i.call(this._yaxis,e[a][1]),e[a][2]]),o.push(e[a][2]),this.radii.push([a,e[a][2]]));var f,l,c=this.maxRadius=t(o),h=this.gridData.length;if(this.autoscaleBubbles)for(var a=0;a<h;a++)l=o[a]/c,f=this.autoscaleMultiplier*u/6,s[a][2]=f*l;return this.radii.sort(function(e,t){return t[1]-e[1]}),s},e.jqplot.BubbleRenderer.prototype.draw=function(t,n,r){this.plugins.pointLabels&&(this.plugins.pointLabels.show=!1);var i=r!=undefined?r:{},s=i.shadow!=undefined?i.shadow:this.shadow;this.canvas._elem.empty();for(var o=0;o<this.radii.length;o++){var u=this.radii[o][0],a=null,f=null,l=null,c=null,h=this.data[u],n=this.gridData[u];h[3]&&(typeof h[3]=="object"?a=h[3].label:typeof h[3]=="string"&&(a=h[3])),f=this.colorGenerator.get(u);var p=n[2],d,v;this.shadow&&(d=(.7+n[2]/40).toFixed(1),v=1+Math.ceil(n[2]/15),p+=d*v),this.bubbleCanvases[u]=new e.jqplot.BubbleCanvas,this.canvas._elem.append(this.bubbleCanvases[u].createElement(n[0],n[1],p)),this.bubbleCanvases[u].setContext();var t=this.bubbleCanvases[u]._ctx,m=t.canvas.width/2,g=t.canvas.height/2;this.shadow&&this.renderer.shadowRenderer.draw(t,[m,g,n[2],0,2*Math.PI],{offset:d,depth:v}),this.bubbleCanvases[u].draw(n[2],f,this.bubbleGradients,this.shadowAngle/180*Math.PI);if(a&&this.showLabels){c=e('<div style="position:absolute;" class="jqplot-bubble-label"></div>'),this.escapeHtml?c.text(a):c.html(a),this.canvas._elem.append(c);var y=e(c).outerHeight(),b=e(c).outerWidth(),w=n[1]-.5*y,E=n[0]-.5*b;c.css({top:w,left:E}),this.labels[u]=e(c)}}},e.jqplot.DivCanvas=function(){e.jqplot.ElemContainer.call(this),this._ctx},e.jqplot.DivCanvas.prototype=new e.jqplot.ElemContainer,e.jqplot.DivCanvas.prototype.constructor=e.jqplot.DivCanvas,e.jqplot.DivCanvas.prototype.createElement=function(t,n,r){this._offsets=t;var i="jqplot-DivCanvas";n!=undefined&&(i=n);var s;this._elem?s=this._elem.get(0):s=document.createElement("div"),r!=undefined&&(this._plotDimensions=r);var o=this._plotDimensions.width-this._offsets.left-this._offsets.right+"px",u=this._plotDimensions.height-this._offsets.top-this._offsets.bottom+"px";return this._elem=e(s),this._elem.css({position:"absolute",width:o,height:u,left:this._offsets.left,top:this._offsets.top}),this._elem.addClass(i),this._elem},e.jqplot.DivCanvas.prototype.setContext=function(){return this._ctx={canvas:{width:0,height:0},clearRect:function(){return null}},this._ctx},e.jqplot.BubbleCanvas=function(){e.jqplot.ElemContainer.call(this),this._ctx},e.jqplot.BubbleCanvas.prototype=new e.jqplot.ElemContainer,e.jqplot.BubbleCanvas.prototype.constructor=e.jqplot.BubbleCanvas,e.jqplot.BubbleCanvas.prototype.createElement=function(t,n,r){var i="jqplot-bubble-point",s;this._elem?s=this._elem.get(0):s=document.createElement("canvas"),s.width=r!=null?2*r:s.width,s.height=r!=null?2*r:s.height,this._elem=e(s);var o=t!=null&&r!=null?t-r:this._elem.css("left"),u=n!=null&&r!=null?n-r:this._elem.css("top");return this._elem.css({position:"absolute",left:o,top:u}),this._elem.addClass(i),e.jqplot.use_excanvas&&(window.G_vmlCanvasManager.init_(document),s=window.G_vmlCanvasManager.initElement(s)),this._elem},e.jqplot.BubbleCanvas.prototype.draw=function(t,n,r,i){var s=this._ctx,o=s.canvas.width/2,u=s.canvas.height/2;s.save();if(r&&!e.jqplot.use_excanvas){t*=1.04;var a=e.jqplot.getColorComponents(n),f="rgba("+Math.round(a[0]+.8*(255-a[0]))+", "+Math.round(a[1]+.8*(255-a[1]))+", "+Math.round(a[2]+.8*(255-a[2]))+", "+a[3]+")",l="rgba("+a[0]+", "+a[1]+", "+a[2]+", 0)",c=.35*t,h=o-Math.cos(i)*.33*t,p=u-Math.sin(i)*.33*t,d=s.createRadialGradient(h,p,c,o,u,t);d.addColorStop(0,f),d.addColorStop(.93,n),d.addColorStop(.96,l),d.addColorStop(1,l),s.fillStyle=d,s.fillRect(0,0,s.canvas.width,s.canvas.height)}else{s.fillStyle=n,s.strokeStyle=n,s.lineWidth=1,s.beginPath();var v=2*Math.PI;s.arc(o,u,t,0,v,0),s.closePath(),s.fill()}s.restore()},e.jqplot.BubbleCanvas.prototype.setContext=function(){return this._ctx=this._elem.get(0).getContext("2d"),this._ctx},e.jqplot.BubbleAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)},e.jqplot.BubbleAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.BubbleAxisRenderer.prototype.constructor=e.jqplot.BubbleAxisRenderer,e.jqplot.BubbleAxisRenderer.prototype.init=function(t){e.extend(!0,this,t);var n=this._dataBounds,r=0,i=0,s=0,o=0,u=0,a=0,f=0,l=0,c=0,h=0;for(var p=0;p<this._series.length;p++){var d=this._series[p],v=d._plotData;for(var m=0;m<v.length;m++)if(this.name=="xaxis"||this.name=="x2axis"){if(v[m][0]<n.min||n.min==null)n.min=v[m][0],r=p,i=m,a=v[m][2],f=d.maxRadius,h=d.autoscaleMultiplier;if(v[m][0]>n.max||n.max==null)n.max=v[m][0],s=p,o=m,u=v[m][2],l=d.maxRadius,c=d.autoscaleMultiplier}else{if(v[m][1]<n.min||n.min==null)n.min=v[m][1],r=p,i=m,a=v[m][2],f=d.maxRadius,h=d.autoscaleMultiplier;if(v[m][1]>n.max||n.max==null)n.max=v[m][1],s=p,o=m,u=v[m][2],l=d.maxRadius,c=d.autoscaleMultiplier}}var g=a/f,y=u/l,b=n.max-n.min,w=Math.min(this._plotDimensions.width,this._plotDimensions.height),E=g*h/3*b,S=y*c/3*b;n.max+=S,n.min-=E},e.jqplot.preInitHooks.push(c)})(jQuery);