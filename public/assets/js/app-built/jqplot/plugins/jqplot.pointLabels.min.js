/* jqPlot 1.0.8r1250 | (c) 2009-2013 Chris Leonello | jplot.com
   jsDate | (c) 2010-2013 Chris Leonello
 */

(function(e){e.jqplot.PointLabels=function(t){this.show=e.jqplot.config.enablePlugins,this.location="n",this.labelsFromSeries=!1,this.seriesLabelIndex=null,this.labels=[],this._labels=[],this.stackedValue=!1,this.ypadding=6,this.xpadding=6,this.escapeHTML=!0,this.edgeTolerance=-5,this.formatter=e.jqplot.DefaultTickFormatter,this.formatString="",this.hideZeros=!1,this._elems=[],e.extend(!0,this,t)};var t=["nw","n","ne","e","se","s","sw","w"],n={nw:0,n:1,ne:2,e:3,se:4,s:5,sw:6,w:7},r=["se","s","sw","w","nw","n","ne","e"];e.jqplot.PointLabels.init=function(t,n,r,i,s){var o=e.extend(!0,{},r,i);o.pointLabels=o.pointLabels||{},this.renderer.constructor===e.jqplot.BarRenderer&&this.barDirection==="horizontal"&&!o.pointLabels.location&&(o.pointLabels.location="e"),this.plugins.pointLabels=new e.jqplot.PointLabels(o.pointLabels),this.plugins.pointLabels.setLabels.call(this)},e.jqplot.PointLabels.prototype.setLabels=function(){var t=this.plugins.pointLabels,n;t.seriesLabelIndex!=null?n=t.seriesLabelIndex:this.renderer.constructor===e.jqplot.BarRenderer&&this.barDirection==="horizontal"?n=this._plotData[0].length<3?0:this._plotData[0].length-1:n=this._plotData.length===0?0:this._plotData[0].length-1,t._labels=[];if(t.labels.length===0||t.labelsFromSeries)if(t.stackedValue){if(this._plotData.length&&this._plotData[0].length)for(var r=0;r<this._plotData.length;r++)t._labels.push(this._plotData[r][n])}else{var i=this.data;this.renderer.constructor===e.jqplot.BarRenderer&&this.waterfall&&(i=this._data);if(i.length&&i[0].length)for(var r=0;r<i.length;r++)t._labels.push(i[r][n]);i=null}else t.labels.length&&(t._labels=t.labels)},e.jqplot.PointLabels.prototype.xOffset=function(e,t,n){t=t||this.location,n=n||this.xpadding;var r;switch(t){case"nw":r=-e.outerWidth(!0)-this.xpadding;break;case"n":r=-e.outerWidth(!0)/2;break;case"ne":r=this.xpadding;break;case"e":r=this.xpadding;break;case"se":r=this.xpadding;break;case"s":r=-e.outerWidth(!0)/2;break;case"sw":r=-e.outerWidth(!0)-this.xpadding;break;case"w":r=-e.outerWidth(!0)-this.xpadding;break;default:r=-e.outerWidth(!0)-this.xpadding}return r},e.jqplot.PointLabels.prototype.yOffset=function(e,t,n){t=t||this.location,n=n||this.xpadding;var r;switch(t){case"nw":r=-e.outerHeight(!0)-this.ypadding;break;case"n":r=-e.outerHeight(!0)-this.ypadding;break;case"ne":r=-e.outerHeight(!0)-this.ypadding;break;case"e":r=-e.outerHeight(!0)/2;break;case"se":r=this.ypadding;break;case"s":r=this.ypadding;break;case"sw":r=this.ypadding;break;case"w":r=-e.outerHeight(!0)/2;break;default:r=-e.outerHeight(!0)-this.ypadding}return r},e.jqplot.PointLabels.draw=function(t,i,s){var o=this.plugins.pointLabels;o.setLabels.call(this);for(var u=0;u<o._elems.length;u++)o._elems[u].emptyForce();o._elems.splice(0,o._elems.length);if(o.show){var a="_"+this._stackAxis+"axis";o.formatString||(o.formatString=this[a]._ticks[0].formatString,o.formatter=this[a]._ticks[0].formatter);var f=this._plotData,l=this._prevPlotData,h=this._xaxis,p=this._yaxis,v,m;for(var u=0,g=o._labels.length;u<g;u++){var y=o._labels[u];if(y==null||o.hideZeros&&parseInt(y,10)==0)continue;y=o.formatter(o.formatString,y),m=document.createElement("div"),o._elems[u]=e(m),v=o._elems[u],v.addClass("jqplot-point-label jqplot-series-"+this.index+" jqplot-point-"+u),v.css("position","absolute"),v.insertAfter(t.canvas),o.escapeHTML?v.text(y):v.html(y);var w=o.location;if(this.fillToZero&&f[u][1]<0||this.fillToZero&&this._type==="bar"&&this.barDirection==="horizontal"&&f[u][0]<0||(this.waterfall&&parseInt(y,10))<0)w=r[n[w]];var E=h.u2p(f[u][0])+o.xOffset(v,w),S=p.u2p(f[u][1])+o.yOffset(v,w);this._stack&&!o.stackedValue&&(this.barDirection==="vertical"?S=(this._barPoints[u][0][1]+this._barPoints[u][1][1])/2+s._gridPadding.top-.5*v.outerHeight(!0):E=(this._barPoints[u][2][0]+this._barPoints[u][0][0])/2+s._gridPadding.left-.5*v.outerWidth(!0)),this.renderer.constructor==e.jqplot.BarRenderer&&(this.barDirection=="vertical"?E+=this._barNudge:S-=this._barNudge),v.css("left",E),v.css("top",S);var x=E+v.width(),T=S+v.height(),N=o.edgeTolerance,C=e(t.canvas).position().left,k=e(t.canvas).position().top,L=t.canvas.width+C,A=t.canvas.height+k;(E-N<C||S-N<k||x+N>L||T+N>A)&&v.remove(),v=null,m=null}}},e.jqplot.postSeriesInitHooks.push(e.jqplot.PointLabels.init),e.jqplot.postDrawSeriesHooks.push(e.jqplot.PointLabels.draw)})(jQuery);